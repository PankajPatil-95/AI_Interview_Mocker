{% extends 'base.html' %}
{% block title %}MockMate - Home{% endblock %}
{% block content %}
<section class="hero bg-light py-5">
    <div class="container">
        <div class="row align-items-center justify-content-between">
            <div class="col-lg-6 col-md-7 mb-4 mb-md-0">
                <h1 class="display-4 fw-bold text-primary mb-3">Ace Your Next Interview</h1>
                <p class="lead text-secondary mb-4">MockMate helps you prepare for interviews with realistic mock sessions, instant feedback, and expert tips.</p>
                <div class="d-flex flex-wrap gap-3">
                    {% if authenticated %}
                        <a href="/dashboard/" class="btn btn-primary btn-lg px-4">Go to Dashboard</a>
                    {% else %}
                        <a href="/signup/" class="btn btn-primary btn-lg px-4">Get Started</a>
                        <a href="/login/" class="btn btn-outline-primary btn-lg px-4">Login</a>
                    {% endif %}
                </div>
            </div>
            <div class="col-lg-5 col-md-5">
                <div id="heroCarousel" class="carousel slide" data-bs-ride="carousel" style="max-width: 500px; margin: 0 auto;">
                    <div class="carousel-inner rounded shadow">
                        <div class="carousel-item active">
                            <img src="https://images.unsplash.com/photo-1519389950473-47ba0277781c?auto=format&fit=crop&w=800&q=80" class="d-block w-100" alt="Interview Preparation" style="max-height: 350px; object-fit:cover;">
                        </div>
                        <div class="carousel-item">
                            <img src="https://images.unsplash.com/photo-1521737852567-6949f3f9f2b5?auto=format&fit=crop&w=800&q=80" class="d-block w-100" alt="Mock Interview" style="max-height: 350px; object-fit:cover;">
                        </div>
                        <div class="carousel-item">
                            <img src="https://images.unsplash.com/photo-1461749280684-dccba630e2f6?auto=format&fit=crop&w=800&q=80" class="d-block w-100" alt="AI Feedback" style="max-height: 350px; object-fit:cover;">
                        </div>
                    </div>
                    <button class="carousel-control-prev" type="button" data-bs-target="#heroCarousel" data-bs-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Previous</span>
                    </button>
                    <button class="carousel-control-next" type="button" data-bs-target="#heroCarousel" data-bs-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Next</span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</section>
<section class="features py-5 bg-white">
    <div class="container" style="max-width: 900px;">
        <h2 class="mb-4 text-center text-primary fw-bold">Platform Features</h2>
        <div class="row g-4 justify-content-center">
            <div class="col-md-4">
                <a href="{% url 'feature_mock_interviews' %}" class="text-decoration-none">
                    <div class="card h-100 border-0 shadow-sm text-center">
                        <div class="card-body">
                            <div class="mb-3">
                                <span class="bg-primary text-white rounded-circle p-3"><i class="bi bi-person-bounding-box fs-2"></i></span>
                            </div>
                            <h5 class="card-title text-primary">Realistic Mock Interviews</h5>
                            <p class="card-text">Simulate real interview scenarios and get comfortable with tough questions.</p>
                            <p class="card-text small text-muted">Over <span id="total-interviews">0</span> interviews conducted</p>
                        </div>
                    </div>
                </a>
            </div>
            <div class="col-md-4">
                <a href="{% url 'feature_feedback' %}" class="text-decoration-none">
                    <div class="card h-100 border-0 shadow-sm text-center">
                        <div class="card-body">
                            <div class="mb-3">
                                <span class="bg-primary text-white rounded-circle p-3"><i class="bi bi-lightning-charge fs-2"></i></span>
                            </div>
                            <h5 class="card-title text-primary">Instant Feedback</h5>
                            <p class="card-text">Receive actionable feedback to improve your performance and confidence.</p>
                            <p class="card-text small text-muted"><span id="total-feedbacks">0</span> users received feedback</p>
                        </div>
                    </div>
                </a>
            </div>
            <div class="col-md-4">
                <a href="{% url 'feature_tips' %}" class="text-decoration-none">
                    <div class="card h-100 border-0 shadow-sm text-center">
                        <div class="card-body">
                            <div class="mb-3">
                                <span class="bg-primary text-white rounded-circle p-3"><i class="bi bi-journal-text fs-2"></i></span>
                            </div>
                            <h5 class="card-title text-primary">Expert Tips & Resources</h5>
                            <p class="card-text">Access curated resources and tips from industry professionals.</p>
                            <p class="card-text small text-muted"><span id="total-users">0</span> active users</p>
                        </div>
                    </div>
                </a>
            </div>
        </div>
    </div>
</section>

<section class="testimonials bg-light py-5">
    <div class="container" style="max-width: 900px;">
        <h2 class="mb-4 text-center text-primary fw-bold">What Our Users Say</h2>
        <div class="row g-4 justify-content-center">
            {% for testimonial in testimonials %}
            <div class="col-md-4">
                <div class="card h-100 border-0 shadow-sm">
                    <div class="card-body">
                        <p class="card-text">"{{ testimonial.content }}"</p>
                        <h6 class="card-subtitle text-muted mt-3">â€” {{ testimonial.user.first_name }} {{ testimonial.user.last_name }}, {{ testimonial.user.profile.role|default:"User" }}</h6>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<section class="dashboard-preview bg-primary text-white py-5">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6">
                <h2 class="mb-4">Your Personalized Dashboard Awaits</h2>
                <p class="mb-4">Track your interview progress, view detailed AI feedback, and access your complete interview history all in one intuitive dashboard.</p>
                <ul class="mb-4">
                    <li>Monitor recent mock interviews and performance</li>
                    <li>Analyze detailed AI-powered feedback</li>
                    <li>Access expert tips and resources</li>
                    <li>Track your improvement over time</li>
                </ul>
                <div class="d-flex flex-wrap gap-3">
                    <a href="/signup/" class="btn btn-light btn-lg px-4">Sign Up Now</a>
                    <a href="/login/" class="btn btn-outline-light btn-lg px-4">Log In</a>
                </div>
            </div>
            <div class="col-lg-6">
                <img src="https://images.unsplash.com/photo-1551288049-bebda4e38f71?auto=format&fit=crop&w=800&q=80" class="img-fluid rounded shadow" alt="Dashboard Preview" style="max-height: 400px; object-fit: cover;">
            </div>
        </div>
    </div>
</section>

<script>
function updateStats() {
    fetch('/stats/')
        .then(response => response.json())
        .then(data => {
            document.getElementById('total-users').textContent = data.total_users;
            document.getElementById('total-interviews').textContent = data.total_interviews;
            document.getElementById('total-feedbacks').textContent = data.total_feedbacks;
        })
        .catch(error => console.error('Error fetching stats:', error));
}

// Update stats on page load
updateStats();

// Update stats every 30 seconds for real-time feel
setInterval(updateStats, 30000);
</script>
{% endblock %}
